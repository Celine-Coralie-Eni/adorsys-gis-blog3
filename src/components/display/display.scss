
@use 'reveal.js/dist/reveal';
@use 'reveal.js/dist/theme/night';
@use 'highlight.js/scss/sunburst';

// ===== SLIDE CONTENT STYLING =====

// Force justify all slide content with proper word spacing
.display .reveal .slides section {
  text-align: justify !important;
  text-justify: inter-word !important;
  word-spacing: normal !important;
  letter-spacing: normal !important;
  white-space: normal !important;
  line-height: 1.6 !important;
  overflow-y: auto !important; /* Allow vertical scrolling for overflowing content */
  max-height: 100% !important; /* Constrain height to enable scrolling */
}

// Target all text elements in slides
.reveal .slides section * {
  text-align: justify !important;
  text-justify: inter-word !important;
  word-spacing: normal !important;
  letter-spacing: normal !important;
  white-space: normal !important;
}

// Specific targeting for slide headings and text
.reveal .slides section h1,
.reveal .slides section h2,
.reveal .slides section h3,
.reveal .slides section h4,
.reveal .slides section h5,
.reveal .slides section h6,
.reveal .slides section p,
.reveal .slides section blockquote,
.reveal .slides section div,
.reveal .slides section span {
  text-align: justify !important;
  text-justify: inter-word !important;
  word-spacing: normal !important;
  letter-spacing: normal !important;
  white-space: normal !important;
  line-height: 1.6 !important;
  margin: 0.5rem 0 !important;
}

// Force text to flow naturally without line breaks
.reveal .slides section h1 *,
.reveal .slides section h2 *,
.reveal .slides section h3 *,
.reveal .slides section h4 *,
.reveal .slides section h5 *,
.reveal .slides section h6 *,
.reveal .slides section p *,
.reveal .slides section div *,
.reveal .slides section span * {
  text-align: justify !important;
  text-justify: inter-word !important;
  word-spacing: normal !important;
  letter-spacing: normal !important;
  white-space: normal !important;
  display: inline !important;
}

// ===== CRITICAL SLIDE TITLE FIXES =====

// Prevent slide titles from being split across lines or columns
.reveal .slides section h1,
.reveal .slides section h2,
.reveal .slides section h3 {
  display: block !important;
  width: 100% !important;
  text-align: center !important;
  white-space: normal !important;
  word-spacing: normal !important;
  letter-spacing: normal !important;
  line-height: 1.4 !important;
  margin: 1rem 0 !important;
  padding: 0 !important;
  overflow-wrap: normal !important;
  word-break: normal !important;
  hyphens: none !important;
}

// Ultra-specific targeting for Reveal.js generated content
.reveal .slides section[data-markdown] h1,
.reveal .slides section[data-markdown] h2,
.reveal .slides section[data-markdown] h3,
.reveal .slides section[data-markdown] h4,
.reveal .slides section[data-markdown] h5,
.reveal .slides section[data-markdown] h6 {
  display: block !important;
  width: 100% !important;
  text-align: center !important;
  white-space: normal !important;
  word-spacing: normal !important;
  letter-spacing: normal !important;
  line-height: 1.4 !important;
  margin: 1rem 0 !important;
  padding: 0 !important;
  overflow-wrap: normal !important;
  word-break: normal !important;
  hyphens: none !important;
  column-span: all !important;
  break-inside: avoid !important;
  float: none !important;
  clear: both !important;
}

// Target the specific text content within headings
.reveal .slides section[data-markdown] h1 *,
.reveal .slides section[data-markdown] h2 *,
.reveal .slides section[data-markdown] h3 *,
.reveal .slides section[data-markdown] h4 *,
.reveal .slides section[data-markdown] h5 *,
.reveal .slides section[data-markdown] h6 * {
  display: inline !important;
  white-space: normal !important;
  word-spacing: normal !important;
  letter-spacing: normal !important;
  text-align: inherit !important;
}

// Force slide titles to stay on single lines when possible
.reveal .slides section h1 br,
.reveal .slides section h2 br,
.reveal .slides section h3 br {
  display: none !important;
}

// Prevent any column layout in slide content
.display .reveal .slides section {
  display: block !important;
  column-count: 1 !important;
  column-gap: normal !important;
  column-fill: auto !important;
  /* Reverted: height: auto !important; */
}

// Ensure slide content flows naturally
.reveal .slides section > * {
  display: block !important;
  width: 100% !important;
  float: none !important;
  clear: both !important;
}

// Fix for lists in slides
.reveal .slides section ul,
.reveal .slides section ol {
  text-align: justify !important;
  text-justify: inter-word !important;
  list-style-position: outside !important;
  margin: 0.5rem 0 !important;
  padding-left: 1.5rem !important;
  word-spacing: normal !important;
  letter-spacing: normal !important;
}

.reveal .slides section li {
  text-align: justify !important;
  text-justify: inter-word !important;
  word-spacing: normal !important;
  letter-spacing: normal !important;
  white-space: normal !important;
  margin: 0.25rem 0 !important;
  line-height: 1.6 !important;
}

// Code blocks should remain left-aligned
.reveal .slides section pre,
.reveal .slides section code {
  text-align: left !important;
  word-spacing: normal !important;
  letter-spacing: normal !important;
}

// ===== BLOG CONTENT (PROSE) STYLING =====

// Apply justified text to all prose content
.prose,
.prose.prose-neutral,
.prose.prose-invert {
  text-align: justify !important;
  text-justify: inter-word !important;
  word-spacing: normal !important;
  letter-spacing: normal !important;
  white-space: normal !important;
  line-height: 1.6 !important;
  max-width: 1200px !important;
  margin-left: auto !important;
  margin-right: auto !important;
}

// Force justify ALL text elements in prose content
.prose *,
.prose.prose-neutral *,
.prose.prose-invert * {
  text-align: justify !important;
  text-justify: inter-word !important;
  word-spacing: normal !important;
  letter-spacing: normal !important;
  white-space: normal !important;
}

// Specific targeting for prose headings and text
// (no additional rules needed; justification handled globally above)

// Constrain media inside prose to the same width and center them
.prose img,
.prose video,
.prose canvas,
.prose svg,
.prose figure {
  display: block !important;
  width: 100% !important;
  max-width: 1200px !important;
  height: auto !important;
  max-height: 600px !important;
  margin-left: auto !important;
  margin-right: auto !important;
}

// ===== MOBILE FULL-WIDTH FIX FOR SLIDES =====
@media (max-width: 640px) {
  // Make inner wrappers fill the slide width
  .reveal .slides section,
  .reveal .slides section div,
  .reveal .slides section p {
    width: 100% !important;
    max-width: 100% !important;
    margin-left: 0 !important;
    margin-right: 0 !important;
  }

  // Ensure media inside paragraphs or divs take full width
  .reveal .slides section p > img,
  .reveal .slides section div > img,
  .reveal .slides section img,
  .reveal .slides section video,
  .reveal .slides section canvas,
  .reveal .slides section svg,
  .reveal .slides section .mermaid-diagram svg { /* Added mermaid svg */
    display: block !important;
    width: 100% !important;
    height: auto !important;
    max-width: 100% !important;
    object-fit: contain !important;
    margin: 0 auto !important;
  }

  // Prevent centered small columns; stack and stretch
  .reveal .slides section .columns,
  .reveal .slides section [style*="max-width"],
  .reveal .slides section [style*="width:"] {
    max-width: 100% !important;
    width: 100% !important;
  }
}

// ===== SLIDE PREVIEW STYLING =====

// Ensure slide preview content is also properly justified
.slide-preview .prose,
.slide-preview .prose *,
.slide-preview .prose.prose-invert,
.slide-preview .prose.prose-invert * {
  text-align: justify !important;
  text-justify: inter-word !important;
  word-spacing: normal !important;
  letter-spacing: normal !important;
  white-space: normal !important;
  line-height: 1.4 !important;
}

// Fix slide preview titles specifically
.slide-preview .prose h1,
.slide-preview .prose h2,
.slide-preview .prose h3,
.slide-preview .prose.prose-invert h1,
.slide-preview .prose.prose-invert h2,
.slide-preview .prose.prose-invert h3 {
  display: block !important;
  width: 100% !important;
  text-align: center !important;
  white-space: normal !important;
  word-spacing: normal !important;
  letter-spacing: normal !important;
  line-height: 1.3 !important;
  margin: 0.25rem 0 !important;
  padding: 0 !important;
  overflow-wrap: normal !important;
  word-break: normal !important;
  hyphens: none !important;
}

// Prevent line breaks in slide preview titles
.slide-preview .prose h1 br,
.slide-preview .prose h2 br,
.slide-preview .prose h3 br,
.slide-preview .prose.prose-invert h1 br,
.slide-preview .prose.prose-invert h2 br,
.slide-preview .prose.prose-invert h3 br {
  display: none !important;
}

// ===== OVERRIDE ANY TAILWIND CLASSES =====

// Override any Tailwind text alignment classes with maximum specificity
.prose.text-justify,
.prose.text-justify *,
.prose.prose-neutral.text-justify,
.prose.prose-neutral.text-justify *,
.prose.prose-invert.text-justify,
.prose.prose-invert.text-justify *,
.reveal .slides section.text-justify,
.reveal .slides section.text-justify * {
  text-align: justify !important;
  text-justify: inter-word !important;
  word-spacing: normal !important;
  letter-spacing: normal !important;
  white-space: normal !important;
}

// ===== CRITICAL FIXES FOR WORD SPACING =====

// Force normal word spacing for all text content
.reveal .slides section,
.reveal .slides section *,
.prose,
.prose *,
.prose.prose-neutral,
.prose.prose-neutral *,
.prose.prose-invert,
.prose.prose-invert * {
  word-spacing: normal !important;
  letter-spacing: normal !important;
  text-justify: inter-word !important;
  text-align-last: auto !important;
}

// Prevent text from breaking unnaturally
.reveal .slides section h1,
.reveal .slides section h2,
.reveal .slides section h3,
.reveal .slides section h4,
.reveal .slides section h5,
.reveal .slides section h6,
.reveal .slides section p,
.reveal .slides section div,
.reveal .slides section span,
.prose h1,
.prose h2,
.prose h3,
.prose h4,
.prose h5,
.prose h6,
.prose p,
.prose div,
.prose span {
  white-space: normal !important;
  word-spacing: normal !important;
  letter-spacing: normal !important;
  text-align: justify !important;
  text-justify: inter-word !important;
  overflow-wrap: normal !important;
  word-break: normal !important;
}

// ===== RESPONSIVE ADJUSTMENTS =====

@media (max-width: 768px) {
  .reveal .slides section,
  .prose,
  .prose.prose-neutral,
  .prose.prose-invert {
    text-align: justify !important;
    text-justify: inter-word !important;
    word-spacing: normal !important;
    letter-spacing: normal !important;
    line-height: 1.5 !important;
    max-width: 100% !important;
  }
}

// ===== REVEAL.JS THEME OVERRIDES =====

// Override any Reveal.js theme column layouts
.reveal .slides section[data-markdown] {
  display: block !important;
  column-count: 1 !important;
  column-gap: normal !important;
  column-fill: auto !important;
}

// Force single column layout for all slide content
.reveal .slides section[data-markdown] * {
  column-span: none !important;
  break-inside: avoid !important;
}

// Override any grid or flex layouts that might cause text splitting
.reveal .slides section {
  display: block !important;
  grid-template-columns: 1fr !important;
  flex-direction: column !important;
}

// Ensure text containers don't create columns
.reveal .slides section .text-container,
.reveal .slides section .content,
.reveal .slides section .slide-content {
  display: block !important;
  width: 100% !important;
  column-count: 1 !important;
  column-gap: normal !important;
}

// ===== AGGRESSIVE OVERRIDES FOR SLIDE LAYOUT =====

// Force all slide content to be in a single column
.display .reveal .slides section,
.display .reveal .slides section[data-markdown],
.display .reveal .slides section[data-markdown] > * {
  display: block !important;
  width: 100% !important;
  max-width: 100% !important;
  column-count: 1 !important;
  column-gap: normal !important;
  column-fill: auto !important;
  grid-template-columns: 1fr !important;
  flex-direction: column !important;
  float: none !important;
  clear: both !important;
  /* Reverted: height: auto !important; */
}

// Prevent any two-column or multi-column layouts
.reveal .slides section[data-markdown] {
  display: flex !important;
  flex-direction: column !important;
  align-items: center !important;
  justify-content: flex-start !important;
  text-align: center !important;
}

// Force headings to be full width and centered
.reveal .slides section[data-markdown] h1,
.reveal .slides section[data-markdown] h2,
.reveal .slides section[data-markdown] h3,
.reveal .slides section[data-markdown] h4,
.reveal .slides section[data-markdown] h5,
.reveal .slides section[data-markdown] h6 {
  flex: 0 0 auto !important;
  width: 100% !important;
  max-width: 100% !important;
  text-align: center !important;
  white-space: normal !important;
  word-spacing: normal !important;
  letter-spacing: normal !important;
  line-height: 1.4 !important;
  margin: 0.5rem 0 !important;
  padding: 0 !important;
  overflow-wrap: normal !important;
  word-break: normal !important;
  hyphens: none !important;
  column-span: all !important;
  break-inside: avoid !important;
  float: none !important;
  clear: both !important;
  display: block !important;
}

// ===== ULTRA-AGGRESSIVE WORD SPACING FIXES =====

// Force normal word spacing on ALL text elements in slides
.reveal .slides section *,
.reveal .slides section[data-markdown] *,
.reveal .slides section[data-markdown] h1 *,
.reveal .slides section[data-markdown] h2 *,
.reveal .slides section[data-markdown] h3 *,
.reveal .slides section[data-markdown] h4 *,
.reveal .slides section[data-markdown] h5 *,
.reveal .slides section[data-markdown] h6 *,
.reveal .slides section[data-markdown] p *,
.reveal .slides section[data-markdown] div *,
.reveal .slides section[data-markdown] span * {
  word-spacing: normal !important;
  letter-spacing: normal !important;
  white-space: normal !important;
  text-align: inherit !important;
  display: inline !important;
  float: none !important;
  clear: none !important;
}

// Specific fix for the "Introduction to LPIC-1" spacing issue
.reveal .slides section[data-markdown] h1,
.reveal .slides section[data-markdown] h2,
.reveal .slides section[data-markdown] h3 {
  word-spacing: normal !important;
  letter-spacing: normal !important;
  white-space: normal !important;
  text-align: center !important;
  display: block !important;
  width: 100% !important;
  max-width: 100% !important;
  line-height: 1.4 !important;
  margin: 0.5rem 0 !important;
  padding: 0 !important;
  overflow-wrap: normal !important;
  word-break: normal !important;
  hyphens: none !important;
  column-span: all !important;
  break-inside: avoid !important;
  float: none !important;
  clear: both !important;
}

// Override any CSS that might be adding extra spacing
.reveal .slides section[data-markdown] h1 *,
.reveal .slides section[data-markdown] h2 *,
.reveal .slides section[data-markdown] h3 * {
  word-spacing: normal !important;
  letter-spacing: normal !important;
  white-space: normal !important;
  display: inline !important;
  margin: 0 !important;
  padding: 0 !important;
  text-indent: 0 !important;
}

// ===== MAXIMUM SPECIFICITY OVERRIDES =====

// Target the exact issue with maximum specificity
html body .reveal .slides section[data-markdown] h1,
html body .reveal .slides section[data-markdown] h2,
html body .reveal .slides section[data-markdown] h3,
html body .reveal .slides section[data-markdown] h4,
html body .reveal .slides section[data-markdown] h5,
html body .reveal .slides section[data-markdown] h6 {
  word-spacing: normal !important;
  letter-spacing: normal !important;
  white-space: normal !important;
  text-align: center !important;
  display: block !important;
  width: 100% !important;
  max-width: 100% !important;
  line-height: 1.4 !important;
  margin: 0.5rem 0 !important;
  padding: 0 !important;
  overflow-wrap: normal !important;
  word-break: normal !important;
  hyphens: none !important;
  column-span: all !important;
  break-inside: avoid !important;
  float: none !important;
  clear: both !important;
}

// Target all child elements with maximum specificity
html body .reveal .slides section[data-markdown] h1 *,
html body .reveal .slides section[data-markdown] h2 *,
html body .reveal .slides section[data-markdown] h3 *,
html body .reveal .slides section[data-markdown] h4 *,
html body .reveal .slides section[data-markdown] h5 *,
html body .reveal .slides section[data-markdown] h6 * {
  word-spacing: normal !important;
  letter-spacing: normal !important;
  white-space: normal !important;
  display: inline !important;
  margin: 0 !important;
  padding: 0 !important;
  text-indent: 0 !important;
  float: none !important;
  clear: none !important;
}

// Force override any Reveal.js theme styles
html body .display .reveal .slides section[data-markdown] {
  word-spacing: normal !important;
  letter-spacing: normal !important;
  white-space: normal !important;
  text-align: center !important;
  display: flex !important;
  flex-direction: column !important;
  align-items: center !important;
  justify-content: flex-start !important;
  width: 100% !important;
  max-width: 100% !important;
  column-count: 1 !important;
  column-gap: normal !important;
  column-fill: auto !important;
  overflow-y: auto !important; /* Allow vertical scrolling for overflowing content */
  max-height: 100% !important; /* Constrain height to enable scrolling */
}

// ===== REVEAL RESET: prefer Reveal.js defaults for slide layout and typography =====
// Undo earlier aggressive overrides so Reveal can scale correctly
.reveal .slides,
.reveal .slides * {
  text-align: unset !important;
  text-justify: auto !important;
  word-spacing: normal !important;
  letter-spacing: normal !important;
  white-space: normal !important;
}

// Constrain embedded display area to match blog content width
.display {
  max-width: 1155px !important;
  margin-left: auto !important;
  margin-right: auto !important;
}
.display .reveal {
  width: 100% !important;
}
.display .reveal .slides {
  width: 100% !important;
}

/* Styles for Reveal.js native fullscreen mode */
html.reveal-fullscreen {
  /* Ensure the main reveal container takes full screen and allows internal scaling */
  .reveal {
    width: 100vw !important;
    height: 100vh !important;
    margin: 0 !important;
    top: 0 !important;
    left: 0 !important;
      /* Automatically scale content to fit viewport, mimicking browser zoom at 200% */
      transform: scale(2) !important;
      transform-origin: top center !important;
    box-sizing: border-box !important;
    padding: 20px !important; /* Add some padding to prevent content touching edges */
    overflow: hidden !important; /* Hide overflow of the main reveal container */
  }

  /* Ensure slides container also takes full available space */
  .reveal .slides {
    width: 100% !important;
    height: 100% !important;
    box-sizing: border-box !important;
    overflow: hidden !important; /* Hide overflow of the slides container */
  }

  /* Individual slide sections should be scrollable if content overflows */
  .reveal .slides section {
    overflow-y: auto !important;
    max-height: 100% !important; /* Max height relative to parent (.slides) */
    width: 100% !important;
    height: auto !important; /* Allow content to dictate height up to max-height */
    box-sizing: border-box !important;
    padding: 20px !important; /* Add padding to slide content */
  }

  .reveal .slides section[data-markdown] {
    overflow-y: auto !important;
    max-height: 100% !important;
    width: 100% !important;
    height: auto !important;
    box-sizing: border-box !important;
    padding: 20px !important;
  }

  /* Ensure mermaid diagrams scale within fullscreen and are scrollable if needed */
  .reveal .slides section .mermaid-diagram {
    max-width: 100% !important;
    max-height: calc(100% - 40px) !important; /* Account for section padding */
    overflow: auto !important; /* Allow scrolling for diagrams themselves */
    display: block !important;
    margin: 0 auto !important;
  }

  .reveal .slides section .mermaid-diagram svg {
    max-width: 100% !important;
    height: auto !important;
    display: block !important;
  }
}


// Body text should be readable and not oversized
.reveal p,
.reveal li,
.reveal blockquote {
  font-size: 1.0em !important;
}

// Cap heading sizes for consistency across slide decks
.reveal h1 { font-size: 1.8em !important; line-height: 1.2 !important; }
.reveal h2 { font-size: 1.5em !important; line-height: 1.25 !important; }
.reveal h3 { font-size: 1.25em !important; line-height: 1.3 !important; }

// Keep headings centered but allow regular flow
.reveal h1,
.reveal h2,
.reveal h3,
.reveal h4,
.reveal h5,
.reveal h6 {
  text-align: center !important;
}